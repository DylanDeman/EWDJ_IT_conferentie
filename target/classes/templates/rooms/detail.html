<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/base :: head">
    <title th:text="${room.name} + ' - ' + #{app.name}">Room Details</title>
</head>
<body>
    <div th:replace="layout/base :: nav"></div>

    <div class="container mt-4">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <h1 class="card-title" th:text="${room.name}">Room Name</h1>
                    <div>
                        <a th:href="@{/rooms}" class="btn btn-secondary" th:text="#{room.back.button}">Back to Rooms</a>
                        <div sec:authorize="hasRole('ADMIN')" class="mt-2">
                            <a th:href="@{/rooms/{id}/edit(id=${room.id})}" class="btn btn-warning" 
                               th:text="#{room.edit.button}">Edit</a>
                            <form th:action="@{/rooms/{id}/delete(id=${room.id})}" method="post" 
                                  style="display: inline;">
                                <button type="submit" class="btn btn-danger" 
                                        th:text="#{room.delete.button}"
                                        onclick="return confirm('#{room.delete.confirm}')">
                                    Delete
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h3 th:text="#{room.details}">Room Details</h3>
                                <dl class="row mb-0">
                                    <dt class="col-sm-4" th:text="#{room.capacity}">Capacity</dt>
                                    <dd class="col-sm-8">
                                        <span th:text="${room.capacity}">Capacity</span>
                                        <span th:text="#{room.capacity.seats}">seats</span>
                                    </dd>
                                    <dt class="col-sm-4" th:text="#{room.location}">Location</dt>
                                    <dd class="col-sm-8" th:text="${room.location}">Location</dd>
                                    <dt class="col-sm-4" th:text="#{room.events}">Events</dt>
                                    <dd class="col-sm-8" th:text="${room.events.size()}">0</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-body">
                                <h3 th:text="#{room.schedule}">Event Schedule</h3>
                                
                                <!-- Schedule Navigation -->
                                <div class="btn-group mb-4" role="group">
                                    <button type="button" class="btn btn-outline-primary" 
                                            th:each="day : ${conferenceDays}"
                                            th:text="${#temporals.format(day, 'EEEE, MMMM d')}"
                                            th:classappend="${selectedDay.equals(day)} ? 'active'"
                                            th:onclick="'window.location.href=\'' + @{/rooms/{id}(id=${room.id}, day=${#temporals.format(day, 'yyyy-MM-dd')})} + '\''">
                                        Day
                                    </button>
                                </div>

                                <!-- Events List -->
                                <div th:if="${not #lists.isEmpty(events)}">
                                    <div class="list-group">
                                        <div th:each="event : ${events}" class="list-group-item">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h5 class="mb-1">
                                                    <a th:href="@{/events/{id}(id=${event.id})}" 
                                                       th:text="${event.name}">Event Name</a>
                                                </h5>
                                                <small th:text="${#temporals.format(event.dateTime, #messages.msg('app.time.format'))}">
                                                    Time
                                                </small>
                                            </div>
                                            <p class="mb-1" th:text="${#strings.abbreviate(event.description, 100)}">
                                                Description
                                            </p>
                                            <small>
                                                <span th:text="#{event.speakers}">Speakers:</span>
                                                <span th:each="speaker, stat : ${event.speakers}" 
                                                      th:text="${speaker} + (${!stat.last} ? ', ' : '')">
                                                    Speaker
                                                </span>
                                            </small>
                                        </div>
                                    </div>
                                </div>

                                <!-- Empty State -->
                                <div th:if="${#lists.isEmpty(events)}" class="text-center py-4">
                                    <p class="lead" th:text="#{room.schedule.empty}">
                                        No events scheduled for this day.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 